<div class="centered-container">
  <mat-card class="main-card">
    <mat-card-header class="centered-header">
      <mat-card-title class="title">Registration</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="registerForm"
        (ngSubmit)="onSubmit()"
        class="form-container"
      >
        <div *ngIf="currentStep === 1">
          <h3>Personal Information</h3>
          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstName" />
                <mat-error
                  *ngIf="f['firstName'].invalid && f['firstName'].touched"
                >
                  First name is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastName" />
                <mat-error
                  *ngIf="f['lastName'].invalid && f['lastName'].touched"
                >
                  Last name is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" />
                <mat-error *ngIf="f['email'].invalid && f['email'].touched">
                  <ng-container *ngIf="f['email'].errors?.['required']">
                    Email is required
                  </ng-container>
                  <ng-container *ngIf="f['email'].errors?.['email']">
                    Email is not valid
                  </ng-container>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Role</mat-label>
                <mat-select formControlName="role">
                  <mat-option *ngFor="let role of roles" [value]="role">
                    {{ role }}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="f['role'].invalid && f['role'].touched">
                  Role is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password" />
                <mat-error
                  *ngIf="f['password'].invalid && f['password'].touched"
                >
                  Password is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div *ngIf="currentStep === 2" formGroupName="address">
          <h3>Address Information</h3>
          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Street Number</mat-label>
                <input matInput formControlName="streetNumber" />
                <mat-error
                  *ngIf="
                    addressControls['streetNumber']?.invalid &&
                    addressControls['streetNumber']?.touched
                  "
                >
                  Street number is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Street Name</mat-label>
                <input matInput formControlName="streetName" />
                <mat-error
                  *ngIf="
                    addressControls['streetName']?.invalid &&
                    addressControls['streetName']?.touched
                  "
                >
                  Street name is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>City</mat-label>
                <input matInput formControlName="city" />
                <mat-error
                  *ngIf="
                    addressControls['city']?.invalid &&
                    addressControls['city']?.touched
                  "
                >
                  City is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="compact-field">
                <mat-label>Postal Code</mat-label>
                <input matInput formControlName="postNumber" />
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <mat-form-field class="compact-field">
                <mat-label>Country</mat-label>
                <input matInput formControlName="country" />
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <mat-card-actions class="button-container">
          <button
            mat-raised-button
            *ngIf="currentStep === 1"
            (click)="goToNextStep()"
            class="next-button"
          >
            Next
          </button>
          <div *ngIf="currentStep === 2" class="step-buttons">
            <button mat-raised-button (click)="goToPreviousStep()">
              Previous
            </button>
            <button mat-raised-button color="primary" type="submit">
              Register
            </button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>
</div>
